(function(){var b=0;var c=["webkit","moz"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(f){var d=new Date().getTime();var e=Math.max(0,16-(d-b));var g=window.setTimeout(function(){f()},e);b=d+e;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());function UnitBezier(b,a,d,c){this.cx=3*b;this.bx=3*(d-b)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*a;this.by=3*(c-a)-this.cy;this.ay=1-this.cy-this.by}UnitBezier.prototype={constructor:UnitBezier,epsilon:0.01,sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,h){var g,f,d,b,e,c;for(d=a,c=0;c<8;c++){b=this.sampleCurveX(d)-a;if(Math.abs(b)<h){return d}e=this.sampleCurveDerivativeX(d);if(Math.abs(e)<h){break}d=d-b/e}g=0;f=1;d=a;if(d<g){return g}if(d>f){return f}while(g<f){b=this.sampleCurveX(d);if(Math.abs(b-a)<h){return d}if(a>b){g=d}else{f=d}d=(f-g)*0.5+g}return d},solve:function(a,b){return this.sampleCurveY(this.solveCurveX(a,b))}};var defaultPattern={ease:new UnitBezier(0.25,0.1,0.25,1),linear:new UnitBezier(0,0,1,1),easeIn:new UnitBezier(0.42,0,1,1),easeOut:new UnitBezier(0,0,0.58,1),easeInOut:new UnitBezier(0.42,0,0.58,1)};var speedPattern=function(){var a=defaultPattern[arguments[0]];return function(d,c,b,e){return a.solve(d/e,UnitBezier.prototype.epsilon)*(b-c)+c}};var flexibleAniamtion={aniamtion:[],init:function(b,a){this.aniamtion[a]={};this.aniamtion[a].duration=b.duration||1000;this.aniamtion[a].easing=b.easing||"ease";this.aniamtion[a].endValue=b.endValue;this.aniamtion[a].callback=b.callback},star:function(f,c){var d=+new Date(),a=this.aniamtion[c],g=a.duration,h=speedPattern(a.easing),b;var e=function(){var j=+new Date(),i="";if(j>=d+g){f.setState(a.endValue);console.log(a.callback);if(a.callback){a.callback()}return false}else{var k={};for(b in a.endValue){k[b]=h(j-d,f.state[b],a.endValue[b],g)}f.setState(k);requestAnimationFrame(function(){e()})}};e()}};module.exports=flexibleAniamtion;